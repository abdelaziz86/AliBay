(function(a){function k(e){a(e).addClass("active")}window.showPopup=k;function C(e){a(e).removeClass("active")}function S(){a(".qtyplus").click(function(e){var r=a(this).attr("data-field"),n=parseInt(a("input[name="+r+"]").val());isNaN(n)?a("input[name="+r+"]").val(1):a("input[name="+r+"]").val(n+1),e.preventDefault()}),a(".qtyminus").click(function(e){var r=a(this).attr("data-field"),n=parseInt(a("input[name="+r+"]").val());!isNaN(n)&&n>1?a("input[name="+r+"]").val(n-1):a("input[name="+r+"]").val(1),e.preventDefault()})}window.qtyProduct=S;function j(e,r,n,o){a.ajax({type:"post",url:"/cart/add.js",data:"quantity="+r+"&id="+e,dataType:"json",beforeSend:function(){k(".loading")},success:function(t){a(".tshopify-popup").removeClass("active"),C(".quickview-product"),Shopify.getCart(function(d){z(d)})},error:function(t,d){C(".loading"),a(".error-message").text(a.parseJSON(t.responseText).description),k(".error-popup")}})}window.doAjaxAddToCart=j;function z(e){var r=a(".enj-minicart-ajax");if(r.empty(),e.item_count===0){r.append("<p>Your cart is currently empty.</p>"),cartCallback(e);return}var n=[],o={},t={},d=a("#CartTemplate").html(),c=Handlebars.compile(d);a.each(e.items,function(l,s){if(s.image!=null)var f=s.image.replace(/(\.[^.]*)$/,"_small$1").replace("http:","");else var f="//cdn.shopify.com/s/assets/admin/no-image-medium-cc9732cb976dd349a0df1d39816fbcc7.gif";o={id:s.variant_id,line:l+1,url:s.url,img:f,name:s.product_title,variation:s.variant_title,properties:s.properties,itemAdd:s.quantity+1,itemMinus:s.quantity-1,itemQty:s.quantity,price:Shopify.formatMoney(s.price,ajaxCartConfig.moneyFormat),vendor:s.vendor},n.push(o)}),t={items:n,note:e.note,totalPrice:Shopify.formatMoney(e.total_price,ajaxCartConfig.moneyFormat)},r.append(c(t)),a(".enj-cartcount").html(e.item_count),a("body").removeClass("drawer--is-loading"),a("body").trigger("ajaxCart.afterCartLoad",e),a(".js-call-minicart").click(),a(".js-number-cart").addClass("active")}function Q(e){return e.toLowerCase().replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")}window.convertToSlug=Q,a(document).ready(function(){a(window).width()<992?x():q(),a(window).resize(function(){a(window).width()<992?x():q()})}),a(document).on("click",".overlay,.continue-shopping, .close-window",function(){return C(".tshopify-popup"),setTimeout(function(){a(".loading").removeClass("loaded-content")},500),!1});function x(){a(window).width()<992?a(".engoj_btn_quickview").each(function(){var e="/products/"+a(this).attr("data-id");a(this).attr("href",e)}):a(".engoj_btn_quickview").attr("href","javascript:void(0)"),a(window).resize(function(){a(window).width()<992?a(".engoj_btn_quickview").each(function(){var e="/products/"+a(this).attr("data-id");a(this).attr("href",e)}):a(".engoj_btn_quickview").attr("href","javascript:void(0)")})}function q(){a(".engoj_btn_quickview").click(function(){k(".loading");var e=a(this).data("id"),r=a(this).closest(".product-info").find(".spr-badge").attr("data-rating")*20+"%";return Shopify.getProduct(e,function(n){var o=a("#quick-view").html();a(".quickview-product").html(o);var t=a(".quickview-product");if(t.find(".product-name a").html(n.title).attr("href",n.url),t.find(".spr-badge .spr-active").css({width:r}),t.find(".star-rating .shopify-product-reviews-badge").attr("data-id",n.id),t.find(".des").length>0){var d=n.description.replace(/(<([^>]+)>)/ig,"");d=d.split(" ").splice(0,20).join(" ")+"...",t.find(".des").text(d)}else t.find(".des").remove();t.find(".price").html(Shopify.formatMoney(n.price,window.money_format)),t.find(".product-inner").attr("id","product-"+n.id),t.find(".variants").attr("id","product-actions-"+n.id),t.find(".variants select").attr("id","product-select-"+n.id),n.compare_at_price>n.price?(t.find(".compare-price").html(Shopify.formatMoney(currencyConverter(n.compare_at_price_max),window.money_format)).show(),t.find(".price").addClass("on-sale")):(t.find(".compare-price").html(""),t.find(".price").removeClass("on-sale")),n.available?(t.find(".total-price span").html(Shopify.formatMoney(currencyConverter(n.price),window.money_format)),g.createQuickViewVariantsSwatch(n,t)):(t.find("select, input, .total-price, .dec, .inc, .variants label").remove(),t.find(".btn-addToCart").text("unavailable").addClass("disabled").attr("disabled","disabled")),S(),g.quickViewSlider(n,t),g.initQuickviewAddToCart(),a(".quickview-product").addClass("active"),a(".loading").addClass("loaded-content"),a(".quickview-product .total-price").length>0&&(a(".quickview-product span[class=qtyplus]").on("click",g.updatePricingQuickview),a(".quickview-product span[class=qtyminus]").on("click",g.updatePricingQuickview))}),!1})}window.quickView=q;var g={selectCallbackQuickview:function(e,r){var n=this,o=jQuery(".quickview-product .product-item"),t=o.find(".btn-addToCart"),d=o.find(".price"),c=o.find(".compare-price"),l=o.find(".total-price span");if(e&&e.featured_image){var s=jQuery(".engoj_img_main_quickview"),f=e.featured_image,b=s[0];Shopify.Image.switchImage(f,b,function(N,A,L){var D=a(L);D.attr("src",N)})}if(e){e.available?t.removeClass("disabled").removeAttr("disabled").text("Add to Cart"):t.val("sold_out").addClass("disabled").attr("disabled","disabled").text("Sold Out"),d.html(Shopify.formatMoney(currencyConverter(e.price),window.money_format)),e.compare_at_price>e.price?(c.html(Shopify.formatMoney(currencyConverter(e.compare_at_price),window.money_format)).show(),d.addClass("on-sale")):(c.hide(),d.removeClass("on-sale"));for(var p=jQuery("#"+r.domIdPrefix).closest("form"),u=0,m=e.options.length;u<m;u++){var h=p.find('.swatch[data-option-index="'+u+'"] :radio[value="'+e.options[u]+'"]');h.length&&(h.get(0).checked=!0)}var y=o.find(".product-inventory span");e.available?e.inventory_management!=null?y.text(e.inventory_quantity+" in_stock"):y.text("many_in_stock"):y.text("out_of_stock");var v=/([0-9]+[.|,][0-9]+[.|,][0-9]+)/g,w=a(".quickview-product .price").text().match(v);if(w||(v=/([0-9]+[.|,][0-9]+)/g,w=a(".quickview-product .price").text().match(v)),w){var V=w[0],M=V.replace(/[.|,]/g,""),O=parseInt(a(".quickview-product input[name=quantity]").val()),l=M*O;l=currencyConverter(l);var _=Shopify.formatMoney(l,window.money_format);v=/([0-9]+[.|,][0-9]+[.|,][0-9]+)/g,_.match(v)||(v=/([0-9]+[.|,][0-9]+)/g),_=_.match(v)[0];var P=new RegExp(V,"g"),I=a(".quickview-product .price").html().replace(P,_);a(".quickview-product .total-price span").html(I)}if(e&&e.featured_image){var f=Shopify.resizeImage(e.featured_image.src,"small");f=f.replace(/https?:/,""),jQuery(".quick-view .quickview-more-views img").each(function(){var A=jQuery(this).attr("src");if(A==f)return jQuery(this).parent().trigger("click"),!1})}}else t.text("unavailable").addClass("disabled").attr("disabled","disabled");Currency.convertAll(shopCurrency,jQuery("#currencies a.selected").attr("data-currency")),jQuery(".selected-currency").text(Currency.currentCurrency)},createQuickViewVariantsSwatch:function(e,r){var n=this;if(e.variants.length>1){for(var o=0;o<e.variants.length;o++){var t=e.variants[o],d='<option value="'+t.id+'">'+t.title+"</option>";r.find("form.variants > select").append(d)}new Shopify.OptionSelectors("product-select-"+e.id,{product:e,onVariantSelected:n.selectCallbackQuickview,enableHistoryState:!0});for(var c=window.file_url.substring(0,window.file_url.lastIndexOf("?")),l=window.asset_url.substring(0,window.asset_url.lastIndexOf("?")),s="",o=0;o<e.options.length;o++){s+='<div class="swatch clearfix" data-option-index="'+o+'">',s+='<div class="header">'+e.options[o].name+"</div>";var f=!1;/Color|Colour/i.test(e.options[o].name)&&(f=!0);for(var b=new Array,p=0;p<e.variants.length;p++){var t=e.variants[p],u=t.options[o],m=Q(u),h="swatch-"+o+"_"+m;b.indexOf(u)<0&&(s+='<div data-value="'+u+'" class=" '+(f?"color":"")+m+(t.available?" available ":" soldout ")+'">',s+='<input id="'+h+'" type="radio" name="option-'+o+'" value="'+u+'" '+(p==0?" checked ":"")+(t.available?"":" disabled")+" />",f?s+='<label class="link_color" for="'+h+'" style="background-color: '+m+';"></label>':s+='<label class="variant_other" for="'+h+'">'+u+"</label>",s+="</div>",t.available&&a('.quickview-product .swatch[data-option-index="'+o+'"] .'+m).removeClass("soldout").addClass("available").find(":radio").removeAttr("disabled"),b.push(u))}s+="</div>"}r.find("form.variants > select").after(s),r.find(".swatch :radio").change(function(){var v=a(this).closest(".swatch").attr("data-option-index"),w=a(this).val();a(this).closest("form").find(".single-option-selector").eq(v).val(w).trigger("change")}),e.available&&e.options.size>1&&(Shopify.optionsMap={},Shopify.linkOptionSelectors(e))}else{r.find("form.variants > select").remove();var y='<input type="hidden" name="id" value="'+e.variants[0].id+'">';r.find("form.variants").append(y)}},createQuickViewVariants:function(e,r){var n=this;if(e.variants.length>1){for(var o=0;o<e.variants.length;o++){var t=e.variants[o],d='<option value="'+t.id+'">'+t.title+"</option>";r.find("form.variants > select").append(d)}new Shopify.OptionSelectors("product-select-"+e.id,{product:e,onVariantSelected:n.selectCallbackQuickview,enableHistoryState:!0}),a(".quickview-product .selectize-input input").attr("disabled","disabled"),e.options.length==1&&a(".selector-wrapper:eq(0)").prepend("<label>"+e.options[0].name+"</label>"),r.find("form.variants .selector-wrapper label").each(function(l,s){a(this).html(e.options[l].name)})}else{r.find("form.variants > select").remove();var c='<input type="hidden" name="id" value="'+e.variants[0].id+'">';r.find("form.variants").append(c)}},quickViewSlider:function(e,r){var n=Shopify.resizeImage(e.featured_image,"grande");if(r.find(".featured-image").append('<a title="'+e.title+'" class="product-photo" href="'+e.url+'"><img class="engoj_img_main_quickview" src="'+n+'" alt="'+e.title+'"/><span class="loading" style="height: 100%; width: 100%; top:0; left:0 z-index: 999; position: absolute; display: none; background: url('+window.loading_url+') center no-repeat;"></span></a>'),e.images.length!=0){var o=r.find(".more-views .owl-carousel");for(i in e.images){var t=Shopify.resizeImage(e.images[i],"grande"),d=Shopify.resizeImage(e.images[i],"compact"),c='<div class="item"><a href="javascript:void(0)" data-image="'+t+'"><img src="'+d+'"  /></a></div>';o.append(c)}o.find("a").click(function(){var l=r.find(".featured-image img"),s=r.find(".featured-image .loading");l.attr("src")!=a(this).attr("data-image")&&(l.attr("src",a(this).attr("data-image")),s.show(),l.on("load",function(f){s.hide(),a(this).unbind("load"),s.hide()}))}),setTimeout(function(){var l=a(".owl-carousel").find(".item");l.length>3&&a(".quickview-product .owl-carousel").slick({slidesToShow:3,slideToScroll:1,dots:!1,arrows:!1})},1e3)}else r.find(".more-views").remove()},initQuickviewAddToCart:function(){a(".quickview-product .btn-addToCart").length>0&&a(".quickview-product .btn-addToCart").click(function(){var e=a(".quickview-product select[name=id]").val();e||(e=a(".quickview-product input[name=id]").val());var r=a(".quickview-product input[name=quantity]").val();r||(r=1);var n=a(".quickview-product .product-title a").html(),o=a(".quickview-product .featured-image img").attr("src");j(e,r,n,o)})},updatePricingQuickview:function(){var e=/([0-9]+[.|,][0-9]+[.|,][0-9]+)/g,r=a(".quickview-product .price").text().match(e);if(r||(e=/([0-9]+[.|,][0-9]+)/g,r=a(".quickview-product .price").text().match(e)),r){var n=r[0],o=n.replace(/[.|,]/g,""),t=parseInt(a(".quickview-product input[name=quantity]").val()),d=o*t,c=Shopify.formatMoney(d,window.money_format);e=/([0-9]+[.|,][0-9]+[.|,][0-9]+)/g,c.match(e)||(e=/([0-9]+[.|,][0-9]+)/g),c=c.match(e)[0];var l=new RegExp(n,"g"),s=a(".quickview-product .price").html().replace(l,c);a(".quickview-product .total-price span").html(s)}}}})(jQuery);
//# sourceMappingURL=/s/files/1/0414/0069/6999/t/2/assets/quickview.js.map?v=15590729374161737239
